[phases.setup]
nixPkgs = ["chromium", "tesseract", "poppler_utils"]

[phases.build]
cmds = [
  "/opt/venv/bin/python -m pip install --upgrade pip",
  "/opt/venv/bin/python -m pip install playwright",
  "/opt/venv/bin/playwright install --with-deps chromium"
]

[start]
cmd = "uvicorn app_v2_clean:app --host 0.0.0.0 --port ${PORT:-8000}"

[variables]
NIXPACKS_PYTHON_VERSION = "3.12"
NIXPACKS_PYTHON_PACKAGE_MANAGER = "requirements"
